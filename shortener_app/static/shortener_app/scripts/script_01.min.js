$(function(){const o=$("#url_form"),t=$("#url_submit"),r=$("#notification"),i=$("#url_input"),a=$("#key_input");r.hide(),o.on("submit",function(e){e.preventDefault(),t.prop({disabled:!0}),$.ajax({method:"POST",url:form_endpoint,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":csrf_token},data:$(this).serialize(),success:(e,s,t)=>{navigator.clipboard.writeText("https://webhost1.pythonanywhere.com/"+e.key),r.addClass("success"),r.removeClass("error"),r.text("Short URL copied to clipboard"),r.show(),o[0].reset(),setTimeout(()=>{i[0].focus(),r.hide()},1500)},error:(e,s,t)=>{e=e.responseJSON;r.removeClass("success"),r.addClass("error"),r.text(e.error_desc),r.show(),("invalid_url"===e.error_code?i:a)[0].focus(),setTimeout(()=>{r.hide()},2e3)},complete:(e,s)=>{t.prop({disabled:!1})}})})});