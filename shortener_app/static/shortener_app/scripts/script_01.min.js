$(function(){const r=$("#url_form"),t=$("#url_submit"),o=$("#notification"),i=$("#url_input"),d=$("#key_input");o.hide(),r.on("submit",function(e){e.preventDefault(),t.prop({disabled:!0}),$.ajax({method:"POST",url:form_endpoint,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":csrf_token},data:$(this).serialize(),success:(e,s,t)=>{navigator.clipboard.writeText("http://127.0.0.1:8000/"+e.key),o.addClass("success"),o.removeClass("error"),o.text("Short URL copied to clipboard"),o.show(),r[0].reset(),setTimeout(()=>{i[0].focus(),o.hide()},1500)},error:(e,s,t)=>{e=e.responseJSON;o.removeClass("success"),o.addClass("error"),o.text(e.error_desc),o.show(),("invalid_url"===e.error_code?i:d)[0].focus(),setTimeout(()=>{o.hide()},2e3)},complete:(e,s)=>{t.prop({disabled:!1})}})})});